
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>D2.9 Interactive Self-Assessment Quiz &#8212; A Competency Approach to Introductory Physics</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/save_cell.css?v=43dd4451" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Module-D2/quiz-D2';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/save_cell.js?v=d135a7b8"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="D2.10 Assessment - Foundation of Scientific Quantification" href="loc-assessment-D2.html" />
    <link rel="prev" title="D2.8 Problems" href="problemsD2.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo-D.png" class="logo__image only-light" alt="A Competency Approach to Introductory Physics - Home"/>
    <script>document.write(`<img src="../_static/logo-D.png" class="logo__image only-dark" alt="A Competency Approach to Introductory Physics - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    A Competency Approach to University Physics I: A Compendium to the D Exam
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Course Home</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://modulearn.academy/spheres/physics/university-physics-I/university-physics-I.html">University Physics I Main Page</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module D1 - Introduction to Python for Physics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Module-D1/LOC-D1.html">D1.0 Learning Outcomes – Introduction to Python for Physics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D1/intro-python.html">D1.1 Introduction to Python in Physics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D1/why-python.html">D1.2 Why We Use Python in Physics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D1/code-cells.html">D1.3 Using Code Cells in This E-Book (Thebe)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D1/options.html">D1.4 Additional / Optional Online Tools for Students</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D1/pseudo-code.html">D1.5 Pseudocode: Planning Before Coding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D1/python-calculator.html">D1.6 Using Python as a Scientific Calculator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D1/importing.html">D1.7 Importing Functions in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D1/equations.html">D1.8 Solving Simple Equations with Symbolic Python and Improve Outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D1/problemsD1.html">D1.9 Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D1/quiz-D1.html">D1.10 Interactive Self-Assessment Quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D1/loc-assessment-D1.html">D1.11 Assessment – Introduction to Python in Physics</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module D2 - Foundation of Scientific Quantification</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="LOC-D2.html">D2.0 Learning Outcomes - Foundations of Scientific Quantification</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scientific_Method.html">D2.1 The Scientific Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="Unit_Conversion.html">D2.2 Units and Conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scientific_Notation.html">D2.3 Scientific Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="orders-magnitude-calculations.html">D2.4 Orders of Magnitude Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="Significant_Figures.html">D2.5 Significant Figures</a></li>
<li class="toctree-l1"><a class="reference internal" href="statistics.html">D2.6 Basic Statistics for Scientific Measurements</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic-plots.html">D2.7 Basic Scientific Graphing</a></li>
<li class="toctree-l1"><a class="reference internal" href="problemsD2.html">D2.8 Problems</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">D2.9 Interactive Self-Assessment Quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="loc-assessment-D2.html">D2.10 Assessment - Foundation of Scientific Quantification</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module D3 - Impulse-Momentum Framework</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Module-D3/LOC-D3.html">D3.0 Learning Outcomes - Impulse-Momentum Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D3/point-particle.html">D3.1 Point Particle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D3/momentum.html">D3.2 Linear Momentum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D3/impulse.html">D3.3 Impulse — Momentum Change as the Fundamental Quantity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D3/impulse-momentum.html">D3.4 Impulse from Force Acting Through Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D3/conservation-momentum.html">D3.5 Conservation of Momentum</a></li>







<li class="toctree-l1"><a class="reference internal" href="../Module-D3/problemsD3.html">D3.6 Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D3/quiz-D3.html">D3.7 Interactive Self-Assessment Quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D3/loc-assessment-D3.html">D3.8 Assessment - Impulse-Momentum</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module D4 - Work-Energy Framework</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Module-D4/LOC-D4.html">D4.0 Learning Outcomes — Work–Energy Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D4/kinetic-energy.html">D4.1 Kinetic Energy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D4/work.html">D4.2 Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D4/work-energy.html">D4.3 Work–Energy: Force Acting Through Displacement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D4/work-energy-graph.html">D4.4 Force–Displacement Graphs and Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D4/conservation-kinetic-energy.html">D4.5 Conservation of Kinetic Energy (Two-Particle Systems)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D4/grav-potential-energy.html">D4.6 Gravitational Potential Energy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D4/mechanical-energy.html">D4.7 Mechanical Energy and the Work–Energy Theorem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D4/power.html">D4.8 Power: Rate of Energy Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D4/problemsD4.html">D4.9 Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D4/quiz-D4.html">D4.10 Interactive Self-Assessment Quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D4/loc-assessment-D4.html">D4.11 Assessment - Work-Energy</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module D5 - Kinematics and Emergence of Newtons Second Law</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Module-D5/LOC-D5.html">D5.0 Learning Outcomes — Kinematics and the Emergence of Newton’s Second Law</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D5/basics-kinematics.html">D5.1 Kinematics in One Dimension</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D5/derived-equations.html">D5.2 Derived Kinematic Equations (Constant Acceleration)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D5/newtons-second-law.html">D5.3 Newton’s Second Law as a Special Case of the Impulse–Momentum Theorem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D5/problemsD5.html">D5.4 Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D5/quiz-D5.html">D5.5 Interactive Self-Assessment Quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D5/loc-assessment-D5.html">D5.6 Assessment - Kinematics and Newton’s 2nd Law</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module D6 - Basic Oscillations and Waves</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Module-D6/LOC-D6.html"><strong>D6.0 Learning Outcomes — Oscillations and Traveling Waves</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D6/basic-oscillations.html">D6.1 Basic Oscillations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D6/basic-waves.html">D6.2 Basic Waves</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D6/problemsD6.html">D6.3 Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D6/quiz-D6.html">D6.4 Interactive Self-Assessment Quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D6/loc-assessment-D6.html">D6.5 Assessment - Oscillations and Traveling Waves</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module D7 - Foundations of Thermodynamics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Module-D7/LOC-D7.html">D7.0 Learning Outcomes — Foundations of Thermodynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D7/temperature.html">D7.1 Temperature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D7/thermal-expansion.html">D7.2 Thermal Expansion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D7/heat.html">D7.3 Heat</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D7/heat-transfer.html">D7.4 Methods of Heat Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D7/first-law-thermo.html">D7.5 The First Law of Thermodynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D7/problemsD7.html">D7.6 Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D7/quiz-D7.html">D7.7 Interactive Self-Assessment Quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D7/loc-assessment-D7.html">D7.8 Assessment - Foundations of Thermodynamics</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module D8 - Advanced Topics (Optional)</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Module-D8/taylor-series.html">D8.1 Advanced Topic A — Taylor Expansions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Module-D8/complex.html">D8.2 Advanced Topic A — Complex Numbers as a Physics Tool</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/executablebooks/jupyter-book/blob/master/Module-D2/quiz-D2.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Module-D2/quiz-D2.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>D2.9 Interactive Self-Assessment Quiz</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="d2-9-interactive-self-assessment-quiz">
<h1>D2.9 Interactive Self-Assessment Quiz<a class="headerlink" href="#d2-9-interactive-self-assessment-quiz" title="Link to this heading">#</a></h1>
<hr style="height:2px;border-width:0;color:gray;background-color:gray"><div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="TLhxJyUTNIMl" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsTLhxJyUTNIMl=[{"question": "A student investigates the question:\n\n\u201cHow does the mass attached to a vertical spring affect how much the spring stretches?\u201d\n\nWhich choice correctly identifies the independent and dependent variables?", "type": "multiple_choice", "answers": [{"answer": "Independent: mass attached to the spring; Dependent: spring stretch", "correct": true, "feedback": "Correct. The mass is intentionally changed, and the spring stretch is measured."}, {"answer": "Independent: spring stretch; Dependent: mass attached to the spring", "correct": false, "feedback": "Not correct. The stretch responds to the mass, not the other way around."}, {"answer": "Independent: spring constant; Dependent: spring stretch", "correct": false, "feedback": "Not correct. The spring constant should remain fixed in this experiment."}, {"answer": "Independent: gravitational acceleration; Dependent: spring stretch", "correct": false, "feedback": "Not correct. Gravity is not being varied in this experiment."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsTLhxJyUTNIMl, TLhxJyUTNIMl);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="GqmgTbIsNHRu" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsGqmgTbIsNHRu=[{"question": "A student claims:\n\n\u201cA heavier object falls faster than a lighter object.\u201d\n\nWhich option is the best example of a testable scientific hypothesis with a minimal data-collection plan?", "type": "multiple_choice", "answers": [{"answer": "If two objects of different mass but similar shape are dropped from the same height at the same time, then they will hit the ground at the same time (within measurement uncertainty). Plan: drop both together from a fixed height at least 5 times, record fall time with video slow-motion, and compare the average times.", "correct": true, "feedback": "Correct. This is testable, identifies what is compared, controls key factors, and includes a minimal repeatable plan."}, {"answer": "Heavier objects fall faster because gravity pulls on them more, so the claim is obviously true. Plan: think about it carefully and decide whether it makes sense.", "correct": false, "feedback": "Not correct. This is not a test or a plan\u2014it's a conclusion without measurements."}, {"answer": "If heavier objects fall faster, then a bowling ball will fall faster than a feather. Plan: drop a bowling ball and a feather once and see which hits first.", "correct": false, "feedback": "Not correct. This fails to control shape/air resistance and uses only one trial, so it doesn't isolate mass as the cause."}, {"answer": "Objects fall at different speeds depending on their mass. Plan: drop many different objects from different heights and write down what you notice.", "correct": false, "feedback": "Not correct. Too many variables change at once (shape, height, release timing), so it\u2019s not a minimal controlled test."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsGqmgTbIsNHRu, GqmgTbIsNHRu);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="KUopFFNKIXQo" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsKUopFFNKIXQo=[{"question": "A student hypothesizes that the stretch of a spring depends only on the attached mass.\n\nThey collect data and find that repeated measurements of stretch for the same mass vary slightly.\n\nWhich outcome would most strongly refute the hypothesis, based on scientific reasoning?", "type": "multiple_choice", "answers": [{"answer": "For the same mass, the measured stretch systematically changes when a different spring is used, even though measurement uncertainty is small.", "correct": true, "feedback": "Correct. This shows another variable (the spring itself) affects the result, contradicting the hypothesis."}, {"answer": "Repeated measurements for the same mass give slightly different stretch values within experimental uncertainty.", "correct": false, "feedback": "Not correct. Small variation within uncertainty is expected and does not refute a hypothesis."}, {"answer": "The student observes that larger masses generally produce larger stretches.", "correct": false, "feedback": "Not correct. This observation supports, rather than refutes, the hypothesis."}, {"answer": "One data point appears lower than the others, but no experimental error can be identified.", "correct": false, "feedback": "Not correct. A single unexplained data point does not by itself refute a hypothesis."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsKUopFFNKIXQo, KUopFFNKIXQo);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="pcTgoDeLKiNo" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionspcTgoDeLKiNo=[{"question": "Which of the following research questions is best suited for a controlled physics experiment, with clearly identifiable independent and dependent variables?", "type": "multiple_choice", "answers": [{"answer": "How does the length of a pendulum affect its oscillation period, when the release angle and mass are kept constant?", "correct": true, "feedback": "Correct. The independent variable (length) and dependent variable (period) are clearly defined, and other factors can be controlled."}, {"answer": "Why do some pendulums swing more smoothly than others?", "correct": false, "feedback": "Not correct. This question is too vague and does not clearly define measurable variables."}, {"answer": "Does changing several properties of a pendulum at once make it behave differently?", "correct": false, "feedback": "Not correct. Multiple variables change simultaneously, making causal relationships unclear."}, {"answer": "What is the best pendulum setup for demonstrating physics concepts?", "correct": false, "feedback": "Not correct. This is subjective and does not lead to a testable experimental design."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionspcTgoDeLKiNo, pcTgoDeLKiNo);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="GzTqvUMHvizC" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsGzTqvUMHvizC=[{"question": "A student wants to test how the drop height affects the time it takes for an object to fall.\n\nWhich prediction and data-collection plan best reflects sound scientific reasoning?", "type": "multiple_choice", "answers": [{"answer": "Prediction: Increasing the drop height will increase the fall time. Plan: Drop the same object from several known heights, repeat each height multiple times, measure the fall time with the same method, and compare the average times.", "correct": true, "feedback": "Correct. The prediction is qualitative, the plan isolates one variable, and repetition allows uncertainty to be assessed."}, {"answer": "Prediction: Objects fall faster from higher places. Plan: Drop different objects from different heights and record which one hits first.", "correct": false, "feedback": "Not correct. Multiple variables change at once, so the effect of height cannot be isolated."}, {"answer": "Prediction: The fall time depends on gravity. Plan: Drop the object once from a tall building and record the time.", "correct": false, "feedback": "Not correct. Gravity is not varied, and a single trial does not support reliable conclusions."}, {"answer": "Prediction: Increasing height will change the fall time. Plan: Choose heights at random and estimate the fall time by counting in your head.", "correct": false, "feedback": "Not correct. The prediction is vague and the measurement method lacks reliability."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsGzTqvUMHvizC, GzTqvUMHvizC);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="QemOzmstqzzB" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsQemOzmstqzzB=[{"question": "A student investigates how the surface roughness of a ramp affects the motion of a sliding block.\n\nWhich prediction and experimental plan best reflects sound qualitative reasoning and a minimal data-collection strategy?", "type": "multiple_choice", "answers": [{"answer": "Prediction: Increasing surface roughness will reduce the distance the block travels. Plan: Use the same block and ramp angle, test several surfaces of increasing roughness, repeat each trial multiple times, and compare the average stopping distances.", "correct": true, "feedback": "Correct. The prediction is physically motivated and the plan isolates roughness as the only changing variable."}, {"answer": "Prediction: Rough surfaces are more interesting than smooth ones. Plan: Slide the block on different surfaces and observe what happens.", "correct": false, "feedback": "Not correct. The prediction is subjective and the plan lacks measurable outcomes."}, {"answer": "Prediction: The block will slow down because of friction. Plan: Change the surface roughness and ramp angle until the motion looks different.", "correct": false, "feedback": "Not correct. Multiple variables change at once, so the effect of roughness cannot be isolated."}, {"answer": "Prediction: Increasing roughness will change the motion. Plan: Perform one trial on each surface and record qualitative observations only.", "correct": false, "feedback": "Not correct. The prediction is vague and the plan lacks repetition and quantitative comparison."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsQemOzmstqzzB, QemOzmstqzzB);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="cJgqZfzzNmsZ" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionscJgqZfzzNmsZ=[{"question": "A student tests the hypothesis that the extension of a spring is proportional to the applied force.\n\nThey can measure the extension using either a ruler with millimeter markings or a motion sensor with digital readout.\n\nWhich statement best reflects sound reasoning about measurement choice and experimental evidence?", "type": "multiple_choice", "answers": [{"answer": "Using the motion sensor is preferable because it reduces reading uncertainty, making it easier to determine whether deviations from proportionality are real or due to measurement noise.", "correct": true, "feedback": "Correct. Improved measurement precision helps distinguish systematic effects from random uncertainty."}, {"answer": "Using the ruler is preferable because it is simpler, and simpler tools always produce more reliable data.", "correct": false, "feedback": "Not correct. Simplicity does not guarantee lower uncertainty or better evidence."}, {"answer": "Either tool is sufficient because uncertainty does not affect whether a hypothesis is correct or incorrect.", "correct": false, "feedback": "Not correct. Uncertainty directly affects how confidently evidence can support or refute a hypothesis."}, {"answer": "The motion sensor should only be used if the hypothesis is already known to be correct.", "correct": false, "feedback": "Not correct. Measurement quality is especially important when testing whether a hypothesis holds."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionscJgqZfzzNmsZ, cJgqZfzzNmsZ);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="oWlFvOseTuIJ" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsoWlFvOseTuIJ=[{"question": "A student hypothesizes that the period of a pendulum depends only on its length.\n\nThey measure the period for a fixed length and find small variations between trials.\n\nWhich interpretation best reflects sound scientific reasoning about uncertainty and evidence?", "type": "multiple_choice", "answers": [{"answer": "Small trial-to-trial variations are expected from measurement uncertainty, and the hypothesis is only challenged if changes exceed the estimated uncertainty.", "correct": true, "feedback": "Correct. Random variation within uncertainty does not refute a hypothesis."}, {"answer": "Any variation between trials proves the hypothesis is incorrect.", "correct": false, "feedback": "Not correct. All measurements contain uncertainty; variation alone is not refutation."}, {"answer": "The student should discard all data except the trial closest to the expected value.", "correct": false, "feedback": "Not correct. Selectively discarding data biases the results."}, {"answer": "The hypothesis cannot be tested unless all measurements give exactly the same value.", "correct": false, "feedback": "Not correct. Exact agreement is neither realistic nor required in experimental science."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsoWlFvOseTuIJ, oWlFvOseTuIJ);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="eckvEQGWeAcO" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionseckvEQGWeAcO=[{"question": "A student measures the length of a hallway as 0.25 miles.\n\nWhat is this length expressed in centimeters using proper unit conversion?", "type": "multiple_choice", "answers": [{"answer": "4.0 \u00d7 10^4 cm", "correct": false, "feedback": "Not correct. This value is far too small for a quarter of a mile."}, {"answer": "4.0 \u00d7 10^5 cm", "correct": true, "feedback": "Correct. Converting miles \u2192 meters \u2192 centimeters gives approximately 4.0 \u00d7 10^5 cm."}, {"answer": "4.0 \u00d7 10^6 cm", "correct": false, "feedback": "Not correct. This is too large by one order of magnitude."}, {"answer": "2.5 \u00d7 10^5 cm", "correct": false, "feedback": "Not correct. This ignores part of the mile-to-meter conversion."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionseckvEQGWeAcO, eckvEQGWeAcO);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="UfYEfVAUQPZG" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsUfYEfVAUQPZG=[{"question": "A car travels at a constant speed of 72 km/h.\n\nWhat is this speed in meters per second?", "type": "multiple_choice", "answers": [{"answer": "5.0 m/s", "correct": false, "feedback": "Not correct. This is too small by more than a factor of two."}, {"answer": "10 m/s", "correct": false, "feedback": "Not correct. This underestimates the correct conversion."}, {"answer": "20 m/s", "correct": true, "feedback": "Correct. Converting km \u2192 m and h \u2192 s gives 72 \u00d7 (1000/3600) \u2248 20 m/s."}, {"answer": "72 m/s", "correct": false, "feedback": "Not correct. The numerical value stays the same only if the units do."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsUfYEfVAUQPZG, UfYEfVAUQPZG);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="SOXegzxjPaCv" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsSOXegzxjPaCv=[{"question": "A car travels at a constant speed of 72 km/h.\n\nConvert this speed to meters per second.\n\nEnter a numerical value. A 2% error tolerance is allowed.", "type": "numeric", "answers": [{"type": "value", "value": 20, "correct": true, "feedback": "Correct. 72 km/h converts to approximately 20 m/s."}, {"type": "range", "range": [19.6, 20.4], "correct": true, "feedback": "Correct. Your answer is within 2% of the correct value."}, {"type": "range", "range": [-999, 19.6], "correct": false, "feedback": "Not correct. Check your unit conversion factors."}, {"type": "range", "range": [20.4, 999], "correct": false, "feedback": "Not correct. Your result is too large for this conversion."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsSOXegzxjPaCv, SOXegzxjPaCv);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="vyBZCxUQhSfC" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsvyBZCxUQhSfC=[{"question": "A runner completes a race of length 1.5 miles.\n\nConvert this distance to meters.\n\nEnter a numerical value. A 2% error tolerance is allowed.", "type": "numeric", "answers": [{"type": "value", "value": 2400, "correct": true, "feedback": "Correct. 1.5 miles is approximately 2414 meters."}, {"type": "range", "range": [2366, 2462], "correct": true, "feedback": "Correct. Your answer is within 2% of the correct value."}, {"type": "range", "range": [-999, 2366], "correct": false, "feedback": "Not correct. Your result is too small\u2014check each conversion step."}, {"type": "range", "range": [2462, 999999], "correct": false, "feedback": "Not correct. Your result is too large\u2014recheck the mile-to-meter conversion."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsvyBZCxUQhSfC, vyBZCxUQhSfC);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="tEXyHIZKHmkM" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionstEXyHIZKHmkM=[{"question": "Which of the following expressions has the correct SI units for force (force is mass x acceleration)?", "type": "multiple_choice", "answers": [{"answer": "kg \u00b7 m / s\u00b2", "correct": true, "feedback": "Correct. Force has SI units of newtons, which are kg \u00b7 m / s\u00b2."}, {"answer": "kg \u00b7 m / s", "correct": false, "feedback": "Not correct. This expression is missing one factor of time in the denominator."}, {"answer": "kg / m \u00b7 s\u00b2", "correct": false, "feedback": "Not correct. Force is proportional to acceleration, not inverse length."}, {"answer": "m / s\u00b2", "correct": false, "feedback": "Not correct. This has the units of acceleration, not force."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionstEXyHIZKHmkM, tEXyHIZKHmkM);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="qgNtWqCjvKFt" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsqgNtWqCjvKFt=[{"question": "Which of the following equations is dimensionally consistent?", "type": "multiple_choice", "answers": [{"answer": "v = a t", "correct": true, "feedback": "Correct. Acceleration has units of m/s\u00b2, and multiplying by time gives m/s, which matches velocity."}, {"answer": "x = v + t", "correct": false, "feedback": "Not correct. Velocity and time have different units and cannot be added."}, {"answer": "F = m + a", "correct": false, "feedback": "Not correct. Mass and acceleration have different units and cannot be added."}, {"answer": "E = F / v", "correct": false, "feedback": "Not correct. Force divided by velocity does not have units of energy."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsqgNtWqCjvKFt, qgNtWqCjvKFt);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="PVZzajUXIWrr" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsPVZzajUXIWrr=[{"question": "Which of the following expressions has the correct SI units for energy?", "type": "multiple_choice", "answers": [{"answer": "kg \u00b7 m\u00b2 / s\u00b2", "correct": true, "feedback": "Correct. Energy has SI units of joules, which are kg \u00b7 m\u00b2 / s\u00b2."}, {"answer": "kg \u00b7 m / s\u00b2", "correct": false, "feedback": "Not correct. These are the units of force, not energy."}, {"answer": "kg \u00b7 m\u00b2 / s", "correct": false, "feedback": "Not correct. This expression is missing one factor of time in the denominator."}, {"answer": "m\u00b2 / s\u00b2", "correct": false, "feedback": "Not correct. This has the units of velocity squared, not energy."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsPVZzajUXIWrr, PVZzajUXIWrr);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="feqcAKZfqLyl" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsfeqcAKZfqLyl=[{"question": "A student writes the following expression for the kinetic energy of an object:\n\nE = (1/2) v\u00b2\n\nwhere v is the speed in meters per second.\n\nWhich statement best diagnoses the problem and correctly fixes it?", "type": "multiple_choice", "answers": [{"answer": "The expression is missing a factor of mass. Multiplying by mass gives units of kg\u00b7m\u00b2/s\u00b2, which are correct for energy.", "correct": true, "feedback": "Correct. Without mass, the expression has units of m\u00b2/s\u00b2, not energy."}, {"answer": "The factor of 1/2 is incorrect and should be removed to fix the units.", "correct": false, "feedback": "Not correct. Numerical factors do not affect units."}, {"answer": "The velocity should be squared again to fix the dimensional inconsistency.", "correct": false, "feedback": "Not correct. Squaring velocity again worsens the unit mismatch."}, {"answer": "The expression is dimensionally correct because energy depends only on speed.", "correct": false, "feedback": "Not correct. Energy depends on both mass and speed."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsfeqcAKZfqLyl, feqcAKZfqLyl);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="gsQJVyOEaCou" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsgsQJVyOEaCou=[{"question": "A student calculates the work done by a constant force and writes:\n\nW = F d = (10 N)(2 m) = 20 N\n\nWhich statement best identifies and corrects the error?", "type": "multiple_choice", "answers": [{"answer": "The final unit is incorrect. Work should be reported in joules, since N\u00b7m is equivalent to J.", "correct": true, "feedback": "Correct. The numerical value is fine, but the units must be N\u00b7m or joules, not newtons."}, {"answer": "The distance should be squared to obtain the correct units for work.", "correct": false, "feedback": "Not correct. Squaring distance would give incorrect dimensions."}, {"answer": "The force should be divided by distance to obtain energy units.", "correct": false, "feedback": "Not correct. Dividing force by distance does not produce energy units."}, {"answer": "There is no error because newtons are the correct unit for work.", "correct": false, "feedback": "Not correct. Newtons are units of force, not energy."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsgsQJVyOEaCou, gsQJVyOEaCou);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="NyEsrPRUEziZ" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsNyEsrPRUEziZ=[{"question": "Which of the following correctly expresses the number 0.00072 in scientific notation?", "type": "multiple_choice", "answers": [{"answer": "7.2 \u00d7 10\u207b\u2074", "correct": true, "feedback": "Correct. Moving the decimal four places to the right gives a power of \u22124."}, {"answer": "72 \u00d7 10\u207b\u2076", "correct": false, "feedback": "Not correct. The coefficient must be between 1 and 10."}, {"answer": "0.72 \u00d7 10\u207b\u00b3", "correct": false, "feedback": "Not correct. Scientific notation requires a coefficient between 1 and 10."}, {"answer": "7.2 \u00d7 10\u207b\u2075", "correct": false, "feedback": "Not correct. This is one order of magnitude too small."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsNyEsrPRUEziZ, NyEsrPRUEziZ);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="NOLPyMRynvYi" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsNOLPyMRynvYi=[{"question": "Which of the following correctly expresses 3.6 \u00d7 10\u2075 in standard decimal notation?", "type": "multiple_choice", "answers": [{"answer": "360000", "correct": true, "feedback": "Correct. A positive exponent of 5 means the decimal moves five places to the right."}, {"answer": "36000", "correct": false, "feedback": "Not correct. The decimal was moved only four places instead of five."}, {"answer": "3600000", "correct": false, "feedback": "Not correct. This is one order of magnitude too large."}, {"answer": "0.00036", "correct": false, "feedback": "Not correct. A positive exponent makes the number larger, not smaller."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsNOLPyMRynvYi, NOLPyMRynvYi);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="HoIVQcRcTuyP" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsHoIVQcRcTuyP=[{"question": "Two quantities are given:\n\nA = 3.0 \u00d7 10\u2076\nB = 4.5 \u00d7 10\u00b3\n\nApproximately how many times larger is A than B?", "type": "multiple_choice", "answers": [{"answer": "About 10\u00b3", "correct": true, "feedback": "Correct. The coefficients are order 1, and the exponents differ by 3, so A is roughly a thousand times larger than B."}, {"answer": "About 10\u00b2", "correct": false, "feedback": "Not correct. This underestimates the effect of the exponent difference."}, {"answer": "About 10\u2076", "correct": false, "feedback": "Not correct. This compares A to 1, not to B."}, {"answer": "About 1", "correct": false, "feedback": "Not correct. The exponent difference alone shows a large scale separation."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsHoIVQcRcTuyP, HoIVQcRcTuyP);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="RhEqPQwXTFnR" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsRhEqPQwXTFnR=[{"question": "Two quantities are given:\n\nA = 6.0 \u00d7 10\u207b\u00b3\nB = 2.0 \u00d7 10\u207b\u2075\n\nWhich statement best describes the ratio A / B?", "type": "multiple_choice", "answers": [{"answer": "A / B \u2248 3 \u00d7 10\u00b2", "correct": true, "feedback": "Correct. Dividing the coefficients gives 3, and subtracting exponents gives 10\u00b2."}, {"answer": "A / B \u2248 3 \u00d7 10\u207b\u00b2", "correct": false, "feedback": "Not correct. The exponent sign is incorrect when dividing powers of ten."}, {"answer": "A / B \u2248 3 \u00d7 10\u207b\u2078", "correct": false, "feedback": "Not correct. This results from incorrectly adding exponents instead of subtracting them."}, {"answer": "A / B \u2248 1", "correct": false, "feedback": "Not correct. The exponent difference alone shows a two-order-of-magnitude separation."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsRhEqPQwXTFnR, RhEqPQwXTFnR);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="GvDSjQfOBQna" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsGvDSjQfOBQna=[{"question": "A distance is reported as 1234567 meters.\n\nWhich representation best conveys the scale and order of magnitude of this quantity in a scientific context?", "type": "multiple_choice", "answers": [{"answer": "1.23 \u00d7 10\u2076 m", "correct": true, "feedback": "Correct. Scientific notation clearly communicates the order of magnitude and scale."}, {"answer": "1234567 m", "correct": false, "feedback": "Not correct. While numerically correct, this form obscures the scale and order of magnitude."}, {"answer": "1,234,567 m", "correct": false, "feedback": "Not correct. Commas improve readability but do not clearly convey order of magnitude."}, {"answer": "0.001234567 \u00d7 10\u2079 m", "correct": false, "feedback": "Not correct. Although equivalent, this representation is unnecessarily confusing."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsGvDSjQfOBQna, GvDSjQfOBQna);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="NjmRqGSBBphd" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsNjmRqGSBBphd=[{"question": "A student compares two lengths:\n\n\u2022 Thickness of a sheet of paper: 1 \u00d7 10\u207b\u2074 m\n\u2022 Height of a table: 1 m\n\nThey form the dimensionless ratio (paper thickness) / (table height).\n\nHow should this ratio be interpreted physically?", "type": "multiple_choice", "answers": [{"answer": "The ratio is much less than 1, indicating the paper thickness is negligible compared to the table height", "correct": true, "feedback": "Correct. A ratio \u226a 1 means one quantity is insignificant relative to the other."}, {"answer": "The ratio is approximately 1, meaning the two lengths are comparable in size", "correct": false, "feedback": "Not correct. The exponent difference shows a large separation in scale."}, {"answer": "The ratio is much greater than 1, meaning the paper is thicker than the table is tall", "correct": false, "feedback": "Not correct. The numerator is far smaller than the denominator."}, {"answer": "The ratio cannot be interpreted because the quantities have different units", "correct": false, "feedback": "Not correct. The ratio is dimensionless, which is why it is meaningful to interpret."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsNjmRqGSBBphd, NjmRqGSBBphd);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="skhZWalRUNHD" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsskhZWalRUNHD=[{"question": "An object moves at a speed of 3 m/s.\n\nThe speed of sound in air is approximately 340 m/s.\n\nA student forms the dimensionless ratio v / c.\n\nWhich interpretation is most physically meaningful?", "type": "multiple_choice", "answers": [{"answer": "v / c \u226a 1, indicating compressibility effects of air are negligible for this motion", "correct": true, "feedback": "Correct. When v is much smaller than c, sound-related and compressibility effects are insignificant."}, {"answer": "v / c \u2248 1, meaning the object is moving near the speed of sound", "correct": false, "feedback": "Not correct. The ratio is roughly 0.01, not order 1."}, {"answer": "v / c \u226b 1, meaning the object is supersonic", "correct": false, "feedback": "Not correct. Supersonic motion requires v / c greater than 1."}, {"answer": "The ratio has units of speed and cannot be interpreted physically", "correct": false, "feedback": "Not correct. The ratio is dimensionless, which is why it is meaningful."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsskhZWalRUNHD, skhZWalRUNHD);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="LOFXfcxZQtIr" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsLOFXfcxZQtIr=[{"question": "A student measures the length of an object using a ruler with millimeter markings.\n\nThe object extends slightly past the 12.3 cm mark and about halfway to 12.4 cm.\n\nWhich measurement is most appropriate to report?", "type": "multiple_choice", "answers": [{"answer": "12.35 cm", "correct": true, "feedback": "Correct. You may estimate one digit beyond the smallest scale division."}, {"answer": "12.3 cm", "correct": false, "feedback": "Not correct. This does not include the estimated final digit."}, {"answer": "12.350 cm", "correct": false, "feedback": "Not correct. This reports more precision than the instrument allows."}, {"answer": "12.36 cm", "correct": false, "feedback": "Not correct. The estimate should reflect the midpoint, not a bias upward."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsLOFXfcxZQtIr, LOFXfcxZQtIr);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="QJMsUwRltMbB" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsQJMsUwRltMbB=[{"question": "A digital stopwatch displays a time of 2.48 s.\n\nWhich statement best describes how this measurement should be reported and interpreted?", "type": "multiple_choice", "answers": [{"answer": "The time should be reported as 2.48 s, with uncertainty set by the stopwatch resolution.", "correct": true, "feedback": "Correct. For digital instruments, the last displayed digit represents the measurement resolution."}, {"answer": "The time should be reported as 2.480 s to show higher precision.", "correct": false, "feedback": "Not correct. Adding extra digits implies precision the instrument does not provide."}, {"answer": "The time should be reported as 2.5 s because digital devices cannot be trusted exactly.", "correct": false, "feedback": "Not correct. Rounding removes valid information provided by the instrument."}, {"answer": "The time should be reported as 2.4 s because only analog instruments allow estimated digits.", "correct": false, "feedback": "Not correct. Digital instruments report discrete values with defined resolution."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsQJMsUwRltMbB, QJMsUwRltMbB);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="QKtrndDFdTVL" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsQKtrndDFdTVL=[{"question": "A thermometer has major markings every 1 \u00b0C and no smaller subdivisions.\n\nThe liquid level is clearly above 22 \u00b0C but not quite halfway to 23 \u00b0C.\n\nWhich temperature reading is most appropriate to report?", "type": "multiple_choice", "answers": [{"answer": "22.3 \u00b0C", "correct": true, "feedback": "Correct. You may estimate one digit beyond the smallest marked division."}, {"answer": "22 \u00b0C", "correct": false, "feedback": "Not correct. This omits the estimated digit that the instrument allows."}, {"answer": "22.30 \u00b0C", "correct": false, "feedback": "Not correct. This reports more precision than the thermometer supports."}, {"answer": "22.5 \u00b0C", "correct": false, "feedback": "Not correct. The reading is not halfway between the markings."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsQKtrndDFdTVL, QKtrndDFdTVL);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="TjpyCrHvCUVQ" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsTjpyCrHvCUVQ=[{"question": "A student calculates the area of a rectangle using the measured values:\n\nlength = 12.4 cm\nwidth = 3.2 cm\n\nWhat is the correctly reported area, using proper significant figures?", "type": "multiple_choice", "answers": [{"answer": "40 cm\u00b2", "correct": true, "feedback": "Correct. The result must have two significant figures, matching the least precise measurement. In this case, the zero is significant based on content."}, {"answer": "39.68 cm\u00b2", "correct": false, "feedback": "Not correct. This reports too many significant figures."}, {"answer": "39.7 cm\u00b2", "correct": false, "feedback": "Not correct. This still has too many significant figures."}, {"answer": "39.68 cm", "correct": false, "feedback": "Not correct. The unit is incorrect and the significant figures are not handled properly."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsTjpyCrHvCUVQ, TjpyCrHvCUVQ);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="QjtCgZJCPwZP" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsQjtCgZJCPwZP=[{"question": "A student measures two distances:\n\nd\u2081 = 12.35 m\nd\u2082 = 4.2 m\n\nThey calculate the total distance d = d\u2081 + d\u2082.\n\nWhat is the correctly reported result using proper significant-figure rules?", "type": "multiple_choice", "answers": [{"answer": "16.6 m", "correct": true, "feedback": "Correct. For addition, the result is limited by the least number of decimal places."}, {"answer": "16.55 m", "correct": false, "feedback": "Not correct. This reports more decimal places than the least precise measurement allows."}, {"answer": "16.6", "correct": false, "feedback": "Not correct. Units must be included in the final reported result."}, {"answer": "16.550 m", "correct": false, "feedback": "Not correct. This implies unjustified precision."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsQjtCgZJCPwZP, QjtCgZJCPwZP);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="tIcPctAbkBJP" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionstIcPctAbkBJP=[{"question": "A student performs the calculation\n\n(2.40 \u00d7 5.1) / 3.00\n\nWhich answer is correctly reported using proper significant-figure rules?", "type": "multiple_choice", "answers": [{"answer": "4.1", "correct": true, "feedback": "Correct. The result must have two significant figures, matching the least precise factor."}, {"answer": "4.08", "correct": false, "feedback": "Not correct. This reports too many significant figures."}, {"answer": "4.080", "correct": false, "feedback": "Not correct. Extra trailing zeros imply unjustified precision."}, {"answer": "4", "correct": false, "feedback": "Not correct. This rounds too aggressively and loses valid precision."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionstIcPctAbkBJP, tIcPctAbkBJP);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="AFtcwgsjfuUN" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsAFtcwgsjfuUN=[{"question": "A student calculates a quantity using the expression\n\nQ = (2.5 + 0.34) \u00d7 4.2\n\nAll numbers are measured values.\n\nWhich answer is correctly reported using proper significant-figure rules?", "type": "multiple_choice", "answers": [{"answer": "12", "correct": true, "feedback": "Correct. The sum is limited to one decimal place (2.8), and the final result must have two significant figures."}, {"answer": "11.9", "correct": false, "feedback": "Not correct. This retains too many significant figures after multiplication."}, {"answer": "11.93", "correct": false, "feedback": "Not correct. Intermediate rounding rules were not applied correctly."}, {"answer": "12.0", "correct": false, "feedback": "Not correct. This implies greater precision than justified by the original measurements."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsAFtcwgsjfuUN, AFtcwgsjfuUN);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="mDAvWnoUlywy" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsmDAvWnoUlywy=[{"question": "A value is reported as 9.96 \u00d7 10\u2075.\n\nIf this value is rounded to TWO significant figures, what is the correct result?", "type": "multiple_choice", "answers": [{"answer": "1.0 \u00d7 10\u2076", "correct": true, "feedback": "Correct. Rounding the coefficient gives 10, which must be rewritten as 1.0 \u00d7 10\u2076."}, {"answer": "9.9 \u00d7 10\u2075", "correct": false, "feedback": "Not correct. Rounding 9.96 to two significant figures gives 10, not 9.9."}, {"answer": "9.6 \u00d7 10\u2075", "correct": false, "feedback": "Not correct. This rounds down, but 9.96 rounds up."}, {"answer": "10 \u00d7 10\u2075", "correct": false, "feedback": "Not correct. Scientific notation requires the coefficient to be between 1 and 10."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsmDAvWnoUlywy, mDAvWnoUlywy);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="ypuebRDJmNIx" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsypuebRDJmNIx=[{"question": "A quantity is estimated as 4.2 \u00d7 10\u2075.\n\nWhat is the correct order of magnitude of this quantity?", "type": "multiple_choice", "answers": [{"answer": "10\u2076", "correct": true, "feedback": "Correct. Because the coefficient is greater than \u221a10 \u2248 3.16, the nearest power of ten is 10\u2076."}, {"answer": "10\u2075", "correct": false, "feedback": "Not correct. 4.2 \u00d7 10\u2075 is closer to 10\u2076 than to 10\u2075."}, {"answer": "4 \u00d7 10\u2075", "correct": false, "feedback": "Not correct. Order of magnitude refers to the nearest power of ten, not the coefficient."}, {"answer": "10\u2074", "correct": false, "feedback": "Not correct. This is two orders of magnitude too small."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsypuebRDJmNIx, ypuebRDJmNIx);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="jmnjkjEvxhki" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsjmnjkjEvxhki=[{"question": "A student measures the acceleration due to gravity several times and obtains the values:\n\n9.81, 9.80, 9.82, 9.81 m/s\u00b2\n\nThe accepted value is 9.80 m/s\u00b2.\n\nWhich statement best describes these measurements?", "type": "multiple_choice", "answers": [{"answer": "The measurements are both accurate and precise.", "correct": true, "feedback": "Correct. The values are tightly clustered (precise) and close to the accepted value (accurate)."}, {"answer": "The measurements are precise but not accurate.", "correct": false, "feedback": "Not correct. The values are close to the accepted value, so they are accurate."}, {"answer": "The measurements are accurate but not precise.", "correct": false, "feedback": "Not correct. The small spread indicates good precision."}, {"answer": "The measurements are neither accurate nor precise.", "correct": false, "feedback": "Not correct. The data clearly cluster near the accepted value."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsjmnjkjEvxhki, jmnjkjEvxhki);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="eAONzuyaZFOa" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionseAONzuyaZFOa=[{"question": "A student measures the length of an object multiple times and records:\n\n18.42, 18.41, 18.43, 18.42 cm\n\nThe accepted value of the length is 19.00 cm.\n\nWhich statement best describes these measurements?", "type": "multiple_choice", "answers": [{"answer": "The measurements are precise but not accurate.", "correct": true, "feedback": "Correct. The measurements are tightly clustered (high precision) but far from the accepted value (low accuracy)."}, {"answer": "The measurements are accurate but not precise.", "correct": false, "feedback": "Not correct. The small spread shows good precision, not poor precision."}, {"answer": "The measurements are both accurate and precise.", "correct": false, "feedback": "Not correct. The values are not close to the accepted value."}, {"answer": "The measurements are neither accurate nor precise.", "correct": false, "feedback": "Not correct. The data clearly show strong repeatability."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionseAONzuyaZFOa, eAONzuyaZFOa);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="zYEPgynStMpJ" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionszYEPgynStMpJ=[{"question": "A student measures the time for a cart to travel a fixed distance five times and obtains:\n\n2.01, 1.99, 2.00, 2.02, 1.98 s\n\nWhich quantity best represents the uncertainty in the *average* travel time?", "type": "multiple_choice", "answers": [{"answer": "The standard error of the mean (SEM)", "correct": true, "feedback": "Correct. The SEM quantifies the uncertainty in the mean due to repeated measurements."}, {"answer": "The mean", "correct": false, "feedback": "Not correct. The mean gives the central value, not the uncertainty."}, {"answer": "The standard deviation", "correct": false, "feedback": "Not correct. The standard deviation measures the spread of individual measurements, not the uncertainty in the mean."}, {"answer": "The range of the data", "correct": false, "feedback": "Not correct. The range is a crude measure and does not properly quantify uncertainty."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionszYEPgynStMpJ, zYEPgynStMpJ);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="nVHJFYjCIQeL" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsnVHJFYjCIQeL=[{"question": "A student measures a time interval five times and obtains the values:\n\n2.01, 1.99, 2.00, 2.02, 1.98 s\n\nWhich of the following correctly reports the result as mean \u00b1 SEM?", "type": "multiple_choice", "answers": [{"answer": "2.00 \u00b1 0.02 s", "correct": true, "feedback": "Correct. The mean is 2.00 s. The standard deviation is about 0.016 s, giving SEM \u2248 0.016/\u221a5 \u2248 0.02 s."}, {"answer": "2.00 \u00b1 0.04 s", "correct": false, "feedback": "Not correct. This value corresponds more closely to the standard deviation, not the SEM."}, {"answer": "2.01 \u00b1 0.02 s", "correct": false, "feedback": "Not correct. The mean is slightly lower when all measurements are averaged."}, {"answer": "2.00 \u00b1 0.01 s", "correct": false, "feedback": "Not correct. This underestimates the uncertainty in the mean."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsnVHJFYjCIQeL, nVHJFYjCIQeL);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="xAtOZTyZYIHS" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsxAtOZTyZYIHS=[{"question": "A student measures a time interval five times and records the values:\n\n2.01, 1.99, 2.00, 2.02, 1.98 s\n\nCalculate the standard deviation of these measurements.\n\nEnter a numerical value in seconds. A 2% error tolerance is allowed.", "type": "numeric", "answers": [{"type": "value", "value": 0.016, "correct": true, "feedback": "Correct. Using the sample standard deviation (N\u22121), the result is approximately 0.016 s."}, {"type": "range", "range": [0.0157, 0.0163], "correct": true, "feedback": "Correct. Your answer is within 2% of the correct standard deviation."}, {"type": "range", "range": [-999, 0.0157], "correct": false, "feedback": "Not correct. This underestimates the spread of the data."}, {"type": "range", "range": [0.0163, 999], "correct": false, "feedback": "Not correct. This overestimates the spread of the measurements."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsxAtOZTyZYIHS, xAtOZTyZYIHS);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="JqUONCgAMUlq" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsJqUONCgAMUlq=[{"question": "A student measures the reaction time of a person several times and obtains:\n\n0.24, 0.25, 0.26, 0.24, 1.10 s\n\nWhich statistic should be reported as the best representative value, and why?", "type": "multiple_choice", "answers": [{"answer": "The median, because the dataset contains a clear outlier that skews the mean.", "correct": true, "feedback": "Correct. The large value strongly affects the mean, but the median better represents the typical measurement."}, {"answer": "The mean, because it always uses all of the data.", "correct": false, "feedback": "Not correct. When strong outliers are present, the mean can be misleading."}, {"answer": "The mean, because the median ignores important information.", "correct": false, "feedback": "Not correct. The median is often preferred when data are skewed or contain outliers."}, {"answer": "Either the mean or the median, because both will give the same result.", "correct": false, "feedback": "Not correct. The outlier causes the mean and median to differ significantly."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsJqUONCgAMUlq, JqUONCgAMUlq);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="ZQhDqmZExAiq" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsZQhDqmZExAiq=[{"question": "A student repeats the same measurement many times.\n\nWhich statement correctly describes the difference between the standard deviation (SD) and the standard error of the mean (SEM)?", "type": "multiple_choice", "answers": [{"answer": "The SD describes the spread of individual measurements, while the SEM describes the uncertainty in the mean value.", "correct": true, "feedback": "Correct. SD measures scatter in the data, whereas SEM quantifies how well the mean is determined."}, {"answer": "The SD and SEM both measure the same quantity but use different formulas.", "correct": false, "feedback": "Not correct. They describe different physical meanings: spread versus uncertainty in the mean."}, {"answer": "The SEM describes the spread of individual measurements, while the SD describes the uncertainty in the mean.", "correct": false, "feedback": "Not correct. This reverses the roles of SD and SEM."}, {"answer": "The SEM is larger than the SD because it includes additional uncertainty.", "correct": false, "feedback": "Not correct. The SEM is always smaller than the SD for N > 1."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsZQhDqmZExAiq, ZQhDqmZExAiq);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="zlsNoNdPaspq" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionszlsNoNdPaspq=[{"question": "A student creates a graph to show how position changes with time.\n\nWhich set of features is required for the graph to be considered scientifically complete and clear?", "type": "multiple_choice", "answers": [{"answer": "Labeled axes with units, an appropriate title, and clearly marked data points", "correct": true, "feedback": "Correct. Axes labels with units and a meaningful title are essential for scientific clarity."}, {"answer": "A title and gridlines, but axis labels are optional if the trend is obvious", "correct": false, "feedback": "Not correct. Without labeled axes and units, the graph cannot be interpreted unambiguously."}, {"answer": "Axis labels without units, since the units are usually implied by the context", "correct": false, "feedback": "Not correct. Units must be explicitly stated to avoid ambiguity."}, {"answer": "Only data points, since the numerical values contain all necessary information", "correct": false, "feedback": "Not correct. Graphs communicate relationships visually and require labels and units."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionszlsNoNdPaspq, zlsNoNdPaspq);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="LNqfRtYLorcV" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsLNqfRtYLorcV=[{"question": "A graph shows position (in meters) on the vertical axis versus time (in seconds) on the horizontal axis.\n\nThe graph is a straight line with a constant positive slope.\n\nWhich statement correctly interprets the slope of this graph?", "type": "multiple_choice", "answers": [{"answer": "The slope represents the object\u2019s velocity, with units of meters per second.", "correct": true, "feedback": "Correct. The slope of a position\u2013time graph gives velocity, and its units are m/s."}, {"answer": "The slope represents the object\u2019s acceleration, with units of meters per second squared.", "correct": false, "feedback": "Not correct. Acceleration is the slope of a velocity\u2013time graph, not position\u2013time."}, {"answer": "The slope represents the object\u2019s position, with units of meters.", "correct": false, "feedback": "Not correct. Position is read directly from the vertical axis, not from the slope."}, {"answer": "The slope represents the elapsed time, with units of seconds.", "correct": false, "feedback": "Not correct. Time is read from the horizontal axis, not inferred from the slope."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsLNqfRtYLorcV, LNqfRtYLorcV);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="bYlkrRyIUMUB" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsbYlkrRyIUMUB=[{"question": "How many significant figures should we apply to 250 if it is provided to us as a measured number?", "type": "multiple_choice", "answers": [{"answer": "2", "correct": true, "feedback": "Correct. Without additional context (such as a decimal point or scientific notation), 250 is assumed to have two significant figures."}, {"answer": "3", "correct": false, "feedback": "Not correct. Writing 250 alone does not indicate that the trailing zero is significant. Three significant figures would need to be indicated explicitly (e.g., 250.)."}, {"answer": "Infinite", "correct": false, "feedback": "Not correct. A measured value never has infinite significant figures; measurements always have finite precision."}, {"answer": "1", "correct": false, "feedback": "Not correct. Even without a decimal point, both the 2 and the 5 are significant digits."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsbYlkrRyIUMUB, bYlkrRyIUMUB);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="woLzhEygqNPd" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionswoLzhEygqNPd=[{"question": "A counted number of 435 has how many significant figures?", "type": "multiple_choice", "answers": [{"answer": "Infinite", "correct": true, "feedback": "Correct. Counted numbers are exact by definition and therefore have infinite significant figures."}, {"answer": "3", "correct": false, "feedback": "Not correct. This would apply if 435 were a measured quantity, not a counted one."}, {"answer": "1", "correct": false, "feedback": "Not correct. A counted number does not lose significance due to measurement limitations."}, {"answer": "4", "correct": false, "feedback": "Not correct. Counted numbers are not limited to a fixed number of significant figures."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionswoLzhEygqNPd, woLzhEygqNPd);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="ZiapgUheXseJ" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsZiapgUheXseJ=[{"question": "How many significant figures does 0.0045 have?", "type": "multiple_choice", "answers": [{"answer": "2", "correct": true, "feedback": "Correct. The digits 4 and 5 are significant; leading zeros only set the decimal place."}, {"answer": "1", "correct": false, "feedback": "Not correct. Both nonzero digits (4 and 5) are significant."}, {"answer": "5", "correct": false, "feedback": "Not correct. Leading zeros are not significant digits."}, {"answer": "4", "correct": false, "feedback": "Not correct. Only the nonzero digits count toward significant figures."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsZiapgUheXseJ, ZiapgUheXseJ);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="UKNNMMEXGWHz" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsUKNNMMEXGWHz=[{"question": "Report the answer of 24.3 \u00d7 1.2 using proper significant figures.", "type": "multiple_choice", "answers": [{"answer": "2.9e1", "correct": true, "feedback": "Correct. The unrounded product is 29.16, and the result must have two significant figures because 1.2 has two significant figures."}, {"answer": "2.92e1", "correct": false, "feedback": "Not correct. This reports three significant figures, which exceeds the precision of 1.2."}, {"answer": "2.916e1", "correct": false, "feedback": "Not correct. This is the unrounded calculator result and reports too many significant figures."}, {"answer": "3.0e1", "correct": false, "feedback": "Not correct. This rounding is too aggressive and loses valid precision."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsUKNNMMEXGWHz, UKNNMMEXGWHz);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="BXIqjJpnmVjO" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsBXIqjJpnmVjO=[{"question": "Report the answer of 5.2 \u00d7 30 using proper significant figures.", "type": "multiple_choice", "answers": [{"answer": "2e2", "correct": true, "feedback": "Correct. The unrounded product is 156. Since 30 (without a decimal point) is assumed to have one significant figure, the final result must be reported with one significant figure."}, {"answer": "1.6e2", "correct": false, "feedback": "Not correct. This assumes that 30 has two significant figures, which is not justified without a decimal point."}, {"answer": "1.56e2", "correct": false, "feedback": "Not correct. This is the unrounded calculator result and reports too many significant figures."}, {"answer": "1.5e2", "correct": false, "feedback": "Not correct. This still reports more precision than allowed by the number 30."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsBXIqjJpnmVjO, BXIqjJpnmVjO);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="gecHSHKhHndf" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsgecHSHKhHndf=[{"question": "Report the answer of 24.0 + 12.24 using proper significant-figure rules.", "type": "multiple_choice", "answers": [{"answer": "3.62e1", "correct": true, "feedback": "Correct. For addition, the result is limited by the least number of decimal places. Since 24.0 is precise to the tenths place, the final answer must be rounded to one decimal place."}, {"answer": "3.624e1", "correct": false, "feedback": "Not correct. This reports too many decimal places. The number 24.0 does not justify precision beyond the tenths place."}, {"answer": "3.6e1", "correct": false, "feedback": "Not correct. This rounds too aggressively and discards valid precision."}, {"answer": "3.424e1", "correct": false, "feedback": "Not correct. This value does not correspond to the sum of the two numbers."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsgecHSHKhHndf, gecHSHKhHndf);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="NuiCvAsNHsGC" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsNuiCvAsNHsGC=[{"question": "Report the answer of 4.5 + 120.05 using proper significant-figure rules.", "type": "multiple_choice", "answers": [{"answer": "1.246e2", "correct": true, "feedback": "Correct. The sum is 124.55, and for addition the result must be rounded to the tenths place, since 4.5 is only precise to one decimal place."}, {"answer": "1.245e2", "correct": false, "feedback": "Not correct. The unrounded sum is 124.55, which rounds up to 124.6 at the tenths place."}, {"answer": "1.25e2", "correct": false, "feedback": "Not correct. This rounds to the ones place, but the data justify precision to the tenths place."}, {"answer": "1.2e2", "correct": false, "feedback": "Not correct. This discards valid decimal-place precision. The rule for significant figures in multiplication does not apply to addition."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsNuiCvAsNHsGC, NuiCvAsNHsGC);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="HZgnwdhJgHSC" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsHZgnwdhJgHSC=[{"question": "A typical CT study generates about 3,000 images. What is the order of magnitude of this number?", "type": "multiple_choice", "answers": [{"answer": "10^3", "correct": true, "feedback": "Correct. 3,000 is closest to ten to the third power (1,000)."}, {"answer": "10^2", "correct": false, "feedback": "Too small; 3,000 is much larger than 100."}, {"answer": "10^4", "correct": false, "feedback": "Close, but 3,000 is three times 1,000\u2014not close enough to 10,000 to round up."}, {"answer": "10^5", "correct": false, "feedback": "Way too large; 100,000 is far from 3,000."}, {"answer": "10^1", "correct": false, "feedback": "Far too small."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsHZgnwdhJgHSC, HZgnwdhJgHSC);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="GwuHFLMBLYCu" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsGwuHFLMBLYCu=[{"question": "A lab reports a concentration c = 3.2 \u00d7 10^-7 mol/L. Using order-of-magnitude rounding, what is the order of magnitude of c?", "type": "multiple_choice", "answers": [{"answer": "10^-6", "correct": true, "feedback": "Correct. The midpoint between 10^-7 and 10^-6 is about 3.16 \u00d7 10^-7. Since 3.2 \u00d7 10^-7 is just above this, it rounds up to 10^-6."}, {"answer": "10^-7", "correct": false, "feedback": "Close, but 3.2 \u00d7 10^-7 is slightly greater than the midpoint (3.16 \u00d7 10^-7), so it rounds up to 10^-6."}, {"answer": "10^-8", "correct": false, "feedback": "Too small by an order of magnitude."}, {"answer": "10^0", "correct": false, "feedback": "Way off; 10^0 = 1, which is nowhere near 3.2 \u00d7 10^-7."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsGwuHFLMBLYCu, GwuHFLMBLYCu);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>24.67
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="NjSwjIdsqsJq" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsNjSwjIdsqsJq=[{"question": "Report 24.672312703997235 to 4  significant figures.", "type": "multiple_choice", "answers": [{"answer": "24.67231", "correct": false, "feedback": "False."}, {"answer": "24.672", "correct": false, "feedback": "False."}, {"answer": "24.67", "correct": true, "feedback": "Correct."}, {"answer": "24.6723", "correct": false, "feedback": "False."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsNjSwjIdsqsJq, NjSwjIdsqsJq);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="NcPeCcYMxsOl" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsNcPeCcYMxsOl=[{"question": "Convert 65.1 ft to m", "type": "multiple_choice", "answers": [{"answer": "214", "correct": false, "feedback": "False."}, {"answer": "19.85", "correct": false, "feedback": "False."}, {"answer": "19.8", "correct": true, "feedback": "Correct."}, {"answer": "19.846", "correct": false, "feedback": "False."}, {"answer": "20.84", "correct": false, "feedback": "False."}, {"answer": "20.8", "correct": false, "feedback": "False."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsNcPeCcYMxsOl, NcPeCcYMxsOl);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="fJgTmehzRCyG" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsfJgTmehzRCyG=[{"question": "Convert 63.7 mph to m/s", "type": "multiple_choice", "answers": [{"answer": "142", "correct": false, "feedback": "False."}, {"answer": "28.45", "correct": false, "feedback": "False."}, {"answer": "28.5", "correct": true, "feedback": "Correct."}, {"answer": "28.456", "correct": false, "feedback": "False."}, {"answer": "29.88", "correct": false, "feedback": "False."}, {"answer": "29.9", "correct": false, "feedback": "False."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsfJgTmehzRCyG, fJgTmehzRCyG);
        }
        </script>
        </div></div>
</div>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">jupyterquiz</span><span class="w"> </span><span class="kn">import</span> <span class="n">display_quiz</span>

<span class="n">example</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;Convert 100 cm$^3$ (cubic centimeters) to m$^3$ (cubic meters).&quot;</span>
        <span class="p">),</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;numeric&quot;</span><span class="p">,</span>
        <span class="s2">&quot;answers&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">1e-4</span><span class="p">,</span>
                <span class="s2">&quot;correct&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s2">&quot;feedback&quot;</span><span class="p">:</span> <span class="p">(</span>
                    <span class="s2">&quot;Correct. Since 1 cm = 10⁻² m, we must cube the conversion factor. &quot;</span>
                    <span class="s2">&quot;Thus 1 cm³ = 10⁻⁶ m³, and 100 cm³ = 1.0 × 10⁻⁴ m³.&quot;</span>
                <span class="p">)</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;range&quot;</span><span class="p">,</span>
                <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0e-4</span><span class="p">,</span> <span class="mf">1.0e-4</span><span class="p">],</span>
                <span class="s2">&quot;correct&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s2">&quot;feedback&quot;</span><span class="p">:</span> <span class="p">(</span>
                    <span class="s2">&quot;Correct. Your answer matches the properly converted volume.&quot;</span>
                <span class="p">)</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;range&quot;</span><span class="p">,</span>
                <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1e-6</span><span class="p">,</span> <span class="mf">9.9e-5</span><span class="p">],</span>
                <span class="s2">&quot;correct&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s2">&quot;feedback&quot;</span><span class="p">:</span> <span class="p">(</span>
                    <span class="s2">&quot;Not correct. This suggests the factor of 100 was not applied correctly.&quot;</span>
                <span class="p">)</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;range&quot;</span><span class="p">,</span>
                <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1e-3</span><span class="p">,</span> <span class="mf">1e2</span><span class="p">],</span>
                <span class="s2">&quot;correct&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s2">&quot;feedback&quot;</span><span class="p">:</span> <span class="p">(</span>
                    <span class="s2">&quot;Not correct. Remember that volume units require cubing the length conversion factor.&quot;</span>
                <span class="p">)</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="n">display_quiz</span><span class="p">(</span><span class="n">example</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div id="CmCwCTvnajvq" data-shufflequestions="False" data-shuffleanswers="True" data-numquestions="1000000"><style>
:root {
    --medium-slate-blue: #6f78ffff;
    --orange-pantone: #f75c03ff;
    --russian-violet: #392061ff;
    --maximum-yellow-red: #ffc857ff;
    --viridian-green: #119da4ff;
    --incorrect-red: #c80202;
    --correct-green: #009113;
}


.Quiz {
     max-width: 600px;
     margin-top: 15px;
     margin-left: auto;
     margin-right: auto;
     margin-bottom: 15px;
     padding-bottom: 4px;
     padding-top: 4px;
     line-height: 1.1;
     font-size: 16pt;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode > pre {
    padding: 4px;
}
.Answer{
     margin: 10px 0;
     display: grid;
     grid-template-columns: auto auto;
     grid-gap: 10px;
}
.Feedback{
     font-size: 16pt;
     text-align:center;
 }

.Input {
    align:left;
    font-size: 20pt;
}
.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: #c0c0c0;
    color: #fff;
    padding: 5px;
    padding-left: 10px;

    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

 .Input-text:focus {
     outline: none;
     background-color: #c0c0c0;
     box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem #999999;
 }

 .MCButton{
     background: #fafafa;
     border: 1px solid #eee;
     border-radius: 10px;
     padding: 10px;
     font-size: 16px;
     cursor: pointer;
     text-align: center;
 }
 .MultipleChoiceQn {
     padding: 10px;
     background: var(--medium-slate-blue);
     color: #fafafa;
     border-radius: 10px;
 }
 .ManyChoiceQn {
     padding: 10px;
     background: var(--orange-pantone);
     color: #fafafa;
     border-radius: 10px;
 }
 .NumericQn {
     padding: 10px;
     background: var(--russian-violet);
     color: #fafafa;
     border-radius: 10px;
 }
.InpLabel {
     line-height: 34px;
     float:left;
     margin-right: 10px;
     color: #101010;
     font-size: 15pt;
}
.incorrect {
    color: var(--incorrect-red);
}
.correct {
    color: var(--correct-green);
}
.correctButton {
    background: var(--correct-green);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}
.incorrectButton {
    background: var(--incorrect-red);
    color: #fafafa;
    box-shadow: inset 0px 0px 5px #555555;
    outline: none;
}


</style><script type="text/Javascript">questionsCmCwCTvnajvq=[{"question": "Convert 100 cm$^3$ (cubic centimeters) to m$^3$ (cubic meters).", "type": "numeric", "answers": [{"type": "value", "value": 0.0001, "correct": true, "feedback": "Correct. Since 1 cm = 10\u207b\u00b2 m, we must cube the conversion factor. Thus 1 cm\u00b3 = 10\u207b\u2076 m\u00b3, and 100 cm\u00b3 = 1.0 \u00d7 10\u207b\u2074 m\u00b3."}, {"type": "range", "range": [0.0001, 0.0001], "correct": true, "feedback": "Correct. Your answer matches the properly converted volume."}, {"type": "range", "range": [1e-06, 9.9e-05], "correct": false, "feedback": "Not correct. This suggests the factor of 100 was not applied correctly."}, {"type": "range", "range": [0.001, 100.0], "correct": false, "feedback": "Not correct. Remember that volume units require cubing the length conversion factor."}]}];
    //var mydiv=document.getElementById("testDIV");//console.log(mydiv);// Make a random ID
function makeid(length) {
    var result           = [];
    var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for ( var i = 0; i < length; i++ ) {
        result.push(characters.charAt(Math.floor(Math.random() *  charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}
function check_mc() {
    var id=this.id.split('-')[0];

    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var answers= event.srcElement.parentElement.children;
    //console.log(answers);
    
    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb"+id);
    if (fb.dataset.numcorrect==1) {
        for (var i = 0; i < answers.length; i++) {
            var child=answers[i];
            child.className="MCButton";
        }



        fb.textContent=event.srcElement.dataset.feedback;
        if (event.srcElement.dataset.correct=="true")   {
            // console.log("Correct action");
            this.classList.add("correctButton");

            fb.className="Feedback";
            fb.classList.add("correct");

        } else {
            //console.log("Error action");
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }
    }
    else {
        //console.log("Many choice not implemented yet");
        var reset = false;
        if (event.srcElement.dataset.correct=="true" )   {
            if (event.srcElement.dataset.answered<=0) {
                if (fb.dataset.answeredcorrect<0) {
                    fb.dataset.answeredcorrect=1;
                    reset=true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child=answers[i];
                        child.className="MCButton";
                        child.dataset.answered=0;
                    }
                }
                this.classList.add("correctButton");
                this.dataset.answered=1;
                fb.className="Feedback";
                fb.classList.add("correct");

            }
        } else {
            if (fb.dataset.answeredcorrect>0) {
                fb.dataset.answeredcorrect=-1;
                reset=true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child=answers[i];
                    child.className="MCButton";
                    child.dataset.answered=0;
                }
            }
            this.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }


        var numcorrect=fb.dataset.numcorrect;
        var answeredcorrect=fb.dataset.answeredcorrect;
        if (answeredcorrect>=0) {
            fb.textContent=event.srcElement.dataset.feedback + " ["  + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.textContent=event.srcElement.dataset.feedback + "["  + 0 + "/" + numcorrect + "]";
        }


    }

    

}

function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {
    var shuffled;
    if (shuffle_answers=="True") {
        //console.log(shuffle_answers+" read as true");
        shuffled=getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled=qa.answers;
    }
    

    var num_correct=0;


    
    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);
        
        // Make input element
        var inp = document.createElement("input");
        inp.type="radio";
        inp.id="quizo"+id+index;
        inp.style="display:none;";
        aDiv.append(inp);
        
        //Make label for input element
        var lab = document.createElement("label");
        lab.className="MCButton";
        lab.id=id+ '-' +index;
        lab.onclick=check_mc;
        lab.textContent=item.answer;
        
        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        lab.setAttribute('data-feedback', item.feedback);
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct>1) {
        outerqDiv.className="ManyChoiceQn";
    } else {
        outerqDiv.className="MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id=ths.id.split('-')[0];

        var submission=ths.value;
				if (submission.indexOf('/') != -1) {
            sub_parts=submission.split('/');
            //console.log(sub_parts);
            submission=sub_parts[0]/sub_parts[1];
        }
        console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            precision=ths.dataset.precision;
            // console.log("1:", submission)
            submission=Math.round((1*submission + Number.EPSILON)*10**precision)/ 10**precision; 
            // console.log("Rounded to ", submission, " precision=", precision  );
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb"+id);
        fb.style.display="none";
        fb.textContent="Incorrect -- try again.";

        answers=JSON.parse(ths.dataset.answers);
        console.log(answers);

        var defaultFB="";
        var correct;
        var done=false;
        answers.every(answer => {
            console.log(answer.type);

            correct=false;
            if (answer.type=="value"){
                if (submission == answer.value) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="range") {
                console.log(answer.range);
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.textContent=answer.feedback;
                    correct=answer.correct;
                    console.log(answer.correct);
                    done=true;
                }
            } else if (answer.type=="default") {
                defaultFB=answer.feedback;
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });

        if ((!done) && (defaultFB != "")) {
            fb.textContent=defaultFB;
            console.log("Default feedback", defaultFB);
        }

        fb.style.display="block";
        if (correct) {
            ths.className="Input-text";
            ths.classList.add("correctButton");
            fb.className="Feedback";
            fb.classList.add("correct");
        } else {
            ths.className="Input-text";
            ths.classList.add("incorrectButton");
            fb.className="Feedback";
            fb.classList.add("incorrect");
        }

        return false;
    }

}

function isValid(el,  charC) {
		if (charC == 46) {
				if (el.value.indexOf('.') === -1) {
					  return true;
				} else if (el.value.indexOf('/') != -1) {
            parts=el.value.split('/');
				    if (parts[1].indexOf('.') === -1) {
					      return true;
            }
        }
        else{
					  return false;
				}
		} else if (charC == 47) {
				if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
					      return true;
            } else {
					  return false;
				    }
        } else {
            return false;
        }
		} else if (charC == 45) {
        if (el.value == "" ) {
            return true;
        } else {
            return false;
        }
    } else {
				if (charC > 31 && (charC < 48 || charC > 57))
					  return false;
		}
		return true;
}

function numeric_keypress( evnt) {
		var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC==13) {
        check_numeric(this, evnt);
    } else{
		    return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



        //console.log(answer);

    
    outerqDiv.className="NumericQn";
    aDiv.style.display='block';

    var lab = document.createElement("label");
    lab.className="InpLabel";
    lab.textContent="Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type="text";
    //inp.id="input-"+id;
    inp.id=id+"-0";
    inp.className="Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers) );
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress=numeric_keypress;
    inp.onpaste= event => false;

    inp.addEventListener("focus", function(event) {
        this.value="";
        return false;
    }
                        );


}
function show_questions (json, mydiv) {
    //var mydiv=document.getElementById(myid);
    var shuffle_questions=mydiv.dataset.shufflequestions;
    var num_questions=mydiv.dataset.numquestions;
    var shuffle_answers=mydiv.dataset.shuffleanswers;
    
    if (num_questions>json.length) {
        num_questions=json.length;
    }
    
    var questions;
    if ( (num_questions<json.length) || (shuffle_questions=="True") ) {
        //console.log(num_questions+","+json.length);
        questions=getRandomSubarray(json, num_questions);
    } else {
        questions=json;
    }
    
    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);
    
    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        iDiv.id = 'quizWrap'+id+index;
        iDiv.className='Quiz';
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;

        var outerqDiv = document.createElement('div');
        outerqDiv.id="OuterquizQn"+id+index;
        //qDiv.textContent=qa.question;
        iDiv.append(outerqDiv);

        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id="quizQn"+id+index;
        //qDiv.textContent=qa.question;
        qDiv.innerHTML=qa.question;
        outerqDiv.append(qDiv);

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa){
            codeDiv = document.createElement('div');
            codeDiv.id="code"+id+index;
            codeDiv.className="QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML=qa.code;
            outerqDiv.append(codeDiv);
            console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id="quizAns"+id+index;
        aDiv.className='Answer';
        iDiv.append(aDiv);

        console.log(qa.type);

        var num_correct;
        if (qa.type=="multiple_choice")  {
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if   (qa.type=="many_choice"){
            num_correct=make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
        } else if  (qa.type=="numeric") {
            console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id="fb"+id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className="Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
}

        {
        show_questions(questionsCmCwCTvnajvq, CmCwCTvnajvq);
        }
        </script>
        </div></div>
</div>
<hr style="height:2px;border-width:0;color:gray;background-color:gray"></section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "executablebooks/jupyter-book",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Module-D2"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="problemsD2.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">D2.8 Problems</p>
      </div>
    </a>
    <a class="right-next"
       href="loc-assessment-D2.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">D2.10 Assessment - Foundation of Scientific Quantification</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Kim Nielsen
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>